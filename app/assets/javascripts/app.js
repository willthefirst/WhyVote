// Generated by CoffeeScript 1.3.3
(function() {
  var HomeController;

  Array.prototype.merge = function(other) {
    return Array.prototype.push.apply(this, other);
  };

  HomeController = function($scope, $window, $location, $http) {
    $scope.select_candidate = function(candidate) {
      $scope.candidate = candidate;
      angular.element('.candidate').removeClass('selected');
      angular.element('#' + candidate).addClass('selected');
      angular.element('.candidate').hide();
      return angular.element('.selected').show();
    };
    return $scope.submit = function() {
      return $http({
        method: 'POST',
        url: '/posts',
        data: $.param({
          post: {
            reason: this.reason,
            candidate: this.candidate
          },
          user: {
            fingerprint: jQuery.fingerprint()
          }
        }),
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
        }
      }).success(function(rsp, status, headers) {
        return console.log(rsp);
      });
    };
  };

  angular.module('why-vote', ['ngCookies']).config([
    '$routeProvider', '$locationProvider', '$httpProvider', function($routeProvider, $locationProvider, $httpProvider) {
      $routeProvider.when('/', {
        templateUrl: '/partials/home.html',
        controller: HomeController
      }).otherwise({
        redirectTo: '/'
      });
      return $locationProvider.html5Mode(true);
    }
  ]);

}).call(this);
